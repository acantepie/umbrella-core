services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    # ---- Component ---- #

    # Menu
    Umbrella\CoreBundle\Component\Menu\MenuProvider:
        public: true
    Umbrella\CoreBundle\Component\Menu\MenuRendererProvider:
        public: true
    Umbrella\CoreBundle\Component\Menu\MenuAuthorizationChecker:
        $tokenStorage: "@security.token_storage"
        $language: "@security.expression_language"
        $trustResolver: "@security.authentication.trust_resolver"
        $authChecker: "@security.authorization_checker"
        $roleHierarchy: "@security.role_hierarchy"
    Umbrella\CoreBundle\Component\Menu\MenuHelper:
        public: true
    Umbrella\CoreBundle\Component\Menu\Extension\MenuTwigExtension:
    Umbrella\CoreBundle\Component\Menu\Extension\BreadcrumbTwigExtension:


    # JsResponse
    Umbrella\CoreBundle\Component\JsResponse\JsResponseBuilder:
        public: true

    # DataTable
    Umbrella\CoreBundle\Component\DataTable\DataTableFactory:
        public: true
    Umbrella\CoreBundle\Component\DataTable\Extension\DataTableTwigExtension:
    Umbrella\CoreBundle\Component\DataTable\RowAction\RowActionRenderer:

    # Column
    Umbrella\CoreBundle\Component\Column\Type\ToggleColumnType:
    Umbrella\CoreBundle\Component\Column\Type\ActionColumnType:
    Umbrella\CoreBundle\Component\Column\Type\BadgeColumnType:
    Umbrella\CoreBundle\Component\Column\Type\ActiveColumnType:
    Umbrella\CoreBundle\Component\Column\Type\BooleanColumnType:
    Umbrella\CoreBundle\Component\Column\Type\ImageColumnType:
        $cacheManager: "@liip_imagine.cache.manager"
    Umbrella\CoreBundle\Component\Column\ColumnFactory:
        public: true

    # Toolbar
    Umbrella\CoreBundle\Component\Toolbar\ToolbarFactory:
        public: true
    Umbrella\CoreBundle\Component\Toolbar\Extension\ToolbarTwigExtension:

    # Action
    Umbrella\CoreBundle\Component\Action\Type\DropdownActionType:
    Umbrella\CoreBundle\Component\Action\Extension\ActionTwigExtension:
    Umbrella\CoreBundle\Component\Action\ActionFactory:
        public: true
    Umbrella\CoreBundle\Component\Action\ActionListFactory:
        public: true

    # Toast
    Umbrella\CoreBundle\Component\Toast\ToastFactory:
        public: true

    # DateTime
    Umbrella\CoreBundle\Component\DateTime\DateTimeHelper:
        public: true
    Umbrella\CoreBundle\Component\DateTime\DateTimeFormatter:
    Umbrella\CoreBundle\Component\DateTime\DateTimeExtension:

    # Task
    Umbrella\CoreBundle\Component\Task\Command\TaskListCommand:
    Umbrella\CoreBundle\Component\Task\Command\TaskRegisterCommand:
    Umbrella\CoreBundle\Component\Task\Command\TaskRunCommand:
    Umbrella\CoreBundle\Component\Task\Command\TaskScheduleCommand:
        bind:
            $consolePath: "%kernel.project_dir%/bin/console"
    Umbrella\CoreBundle\Component\Task\Handler\TaskHandlerFactory:
    Umbrella\CoreBundle\Component\Task\Extension\TaskTwigExtension:
    Umbrella\CoreBundle\Component\Task\Extension\TaskHelper:
        public: true
    Umbrella\CoreBundle\Component\Task\TaskManager:
        public: true

    # Ckeditor
    Umbrella\CoreBundle\Component\Ckeditor\CkeditorConfiguration:
    Umbrella\CoreBundle\Component\Ckeditor\CkeditorExtension:

    # ---- Umbrella ----#

    #Command
    Umbrella\CoreBundle\Command\IndexEntityCommand:

    #Extension
    Umbrella\CoreBundle\Extension\CoreTwigExtension:
    Umbrella\CoreBundle\Extension\WebpackTwigExtension:

    #Form
    Umbrella\CoreBundle\Form\:
        resource: '../../Form'

    # Services
    Umbrella\CoreBundle\Services\UmbrellaFileUploader:
        public: true
        bind:
            $publicPath: "%kernel.project_dir%/public"
            $assetPath: "/umbrella-file"

    Umbrella\CoreBundle\Services\SearchHandler:
        public: true
    Umbrella\CoreBundle\Services\UmbrellaRedis:
        public: true
    Umbrella\CoreBundle\Services\EntityIndexer:
        public: true
    Umbrella\CoreBundle\Services\DateFormater:
        public: true
    Umbrella\CoreBundle\Services\Mailer:
        public: true

    # Annotation
    Umbrella\CoreBundle\Annotation\SearchableAnnotationReader:
    Umbrella\CoreBundle\Annotation\DiscriminatorEntryReader:

    # Validator
    Umbrella\CoreBundle\Validator\UmbrellaFileValidator:

    # Listener

    Umbrella\CoreBundle\Listener\EntitySubscriber:
        tags:
            - {name: doctrine.event_subscriber}
    Umbrella\CoreBundle\Listener\UmbrellaFileListener:
        tags:
            - { name: doctrine.orm.entity_listener }
    Umbrella\CoreBundle\Listener\UmbrellaViewResponseListener:
        tags:
            - {name: kernel.event_subscriber }

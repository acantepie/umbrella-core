{% use "bootstrap_4_horizontal_layout.html.twig" %}

{# DEBUT - GENERIQUE AUX DEUX LAYOUTS #}
{% use "UmbrellaCoreBundle:Form:interval.html.twig" %}
{% use "UmbrellaCoreBundle:Form:umbrellafile.html.twig" %}
{% use "UmbrellaCoreBundle:Form:umbrellacollection.html.twig" %}
{% use "UmbrellaCoreBundle:Form:accordion.html.twig" %}
{% use "UmbrellaCoreBundle:Form:async_entity2.html.twig" %}

{%- block form_label_class -%}
    {% if form.vars.label_class is defined %}
        {{ form.vars.label_class }}
    {% endif %}
{%- endblock form_label_class -%}

{%- block form_group_class -%}
    {% if form.vars.group_class is defined %}
        {{ form.vars.group_class }}
    {% endif %}
{%- endblock form_group_class -%}

{%- block form_row_class -%}
    {{ form.vars.row_class }}
{%- endblock form_row_class -%}

{%- block form_help -%}
    {% if help is defined and help is not none and help != false %}
        <p class="form-text text-muted {% if help_class is defined %}{{ help_class }}{% endif %}">{{ help | trans }}</p>
    {% endif %}
{%- endblock form_help -%}

{%- block form_header -%}
    {% if header is defined and header is not none and header != false %}
        <div class="title-divider">
            <h5>{{ header | trans }}</h5>
        </div>
    {% endif %}
{%- endblock form_header -%}

{% block checkbox_row -%}
    {{- block('form_header') -}}
    {{ parent() }}
{%- endblock checkbox_row %}

{%- block choice_widget_options -%}
    {% for group_label, choice in options %}
        {%- if choice is iterable -%}
            <optgroup label="{{ choice_translation_domain is same as(false) ? group_label : (choice_prefix ~ group_label)|trans({}, choice_translation_domain) }}">
                {% set options = choice %}
                {{- block('choice_widget_options') -}}
            </optgroup>
        {%- else -%}
            <option value="{{ choice.value }}"{% if choice.attr %}{% with { attr: choice.attr } %}{{ block('attributes') }}{% endwith %}{% endif %}{% if choice is selectedchoice(value) %} selected="selected"{% endif %}>{{ choice_translation_domain is same as(false) ? choice.label : (choice_prefix ~ choice.label)|trans({}, choice_translation_domain) }}</option>
        {%- endif -%}
    {% endfor %}
{%- endblock choice_widget_options -%}
{# FIN - GENERIQUE AUX DEUX LAYOUTS #}


{% block form_row -%}
    {{- block('form_header') -}}
    {%- if expanded is defined and expanded -%}
        {{ block('fieldset_form_row') }}
        {{- form_errors(form) -}}
    {%- else -%}
        <div class="form-group {{ block('form_row_class') }} row{% if (not compound or force_error|default(false)) and not valid %} is-invalid{% endif %}">
            {{- form_label(form) -}}
            <div class="{{ block('form_group_class') }}">
                {{- form_widget(form) -}}
                {{ block('form_help') }}
                {{- form_errors(form) -}}
            </div>
        </div>
    {%- endif -%}
{%- endblock form_row %}

{% block form_label -%}
    {%- if label is same as(false) -%}
        <div class="{{ block('form_label_class') }}"></div>
    {%- else -%}
        {%- if expanded is not defined or not expanded -%}
            {%- set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' col-form-label')|trim}) -%}
        {%- endif -%}
        {%- set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' ' ~ block('form_label_class'))|trim}) -%}
        {%- if compound is defined and compound -%}
            {%- set element = 'legend' -%}
            {%- set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' col-form-label')|trim}) -%}
        {%- else -%}
            {%- set label_attr = label_attr|merge({for: id, class: (label_attr.class|default('') ~ ' form-control-label')|trim}) -%}
        {%- endif -%}
        {% if required -%}
            {% set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' required')|trim}) %}
        {%- endif -%}
        {% if label is empty -%}
            {%- if label_format is not empty -%}
                {% set label = label_format|replace({
                '%name%': name,
                '%id%': id,
                }) %}
            {%- else -%}
                {% set label = name|humanize %}
            {%- endif -%}
        {%- endif -%}
        <{{ element|default('label') }}{% if label_attr %}{% with { attr: label_attr } %}{{ block('attributes') }}{% endwith %}{% endif %}>{{ translation_domain is same as(false) ? label : label|trans({}, translation_domain) }}</{{ element|default('label') }}>

    {%- endif -%}
{%- endblock form_label %}

{% block form_widget_simple -%}
    {% if input_prefix or input_suffix %}
        <div class="input-group">
            {% if input_prefix %}
                <div class="input-group-prepend">
                    <span class="input-group-text">{{ input_prefix | raw }}</span>
                </div>
            {% endif %}
            {{- parent() -}}
            {% if input_suffix %}
                <div class="input-group-append">
                    <span class="input-group-text">{{ input_suffix | raw }}</span>
                </div>
            {% endif %}
        </div>
    {% else %}
        {{- parent() -}}
    {% endif %}
{%- endblock form_widget_simple %}